generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
  engineType = "client"
  runtime = "bun"
}

datasource db {
  provider = "postgresql"
}

model User { 
  id             Int      @id @default(autoincrement()) @map("user_id")
  createdAt      DateTime @default(now()) @map("created_at")
  email          String   @unique
  name           String?
  password       String
  emailVerified  Boolean  @map("email_verified")

  @@map("users")
}

model Article {
  id          Int       @id @default(autoincrement()) @map("article_id")
  createdAt   DateTime  @default(now()) @map("created_at")
  title       String
  description String
  authors     String[]
  publishedAt DateTime  @map("published_at")
  originalUrl String    @unique @map("original_url")
  imageUrl    String?   @map("image_url")
  publisher   Publisher @relation(fields: [publisherId], references: [id])
  publisherId Int       @map("publisher_id")
  tags         Tag[]    @relation("article_tags")

  @@map("articles")
}

model Publisher {
  id          Int     @id @default(autoincrement()) @map("publisher_id")
  name        String  @unique
  displayName String? @map("display_name")
  imageUrl    String? @map("image_url")
  articles Article[]

  @@map("publishers")
}

model Tag {
  id       Int       @id @default(autoincrement()) @map("tag_id")
  name     String    @unique
  articles Article[] @relation("article_tags")

  @@map("tags")
}
