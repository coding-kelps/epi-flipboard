type: epiflipboard_aggregator.components.article_aggregator.ArticleAggregatorComponent

attributes:
  s3_io_manager:
    bucket: kelps-dagster
    s3:
      aws_access_key_id: "{{ env.S3_ACCESS_KEY_ID }}"
      aws_secret_access_key: "{{ env.S3_ACCESS_SECRET_KEY }}"
  sources:
    - name: France
      opml_url: https://raw.githubusercontent.com/coding-kelps/epi-flipboard/refs/heads/master/aggregator/sources/france.opml
    - name: United Kingdom
      opml_url: https://raw.githubusercontent.com/coding-kelps/epi-flipboard/refs/heads/master/aggregator/sources/united-kingdom.opml
    - name: United States
      opml_url: https://raw.githubusercontent.com/coding-kelps/epi-flipboard/refs/heads/master/aggregator/sources/united-states.opml
  max_article_per_feed: 5
  article_tag_similarity_threshold: 0.70
  postgresql:
    username: "{{ env.POSTGRES_USER }}"
    password: "{{ env.POSTGRES_PASSWORD }}"
    host: "{{ env.POSTGRES_HOST }}"
    port: "{{ env.POSTGRES_PORT | int }}"
    db_name: "{{ env.POSTGRES_DB }}"
  qdrant:
    host: "{{ env.QDRANT_HOST }}"
    port: "{{ env.QDRANT_PORT | int }}"
    https: false
  sentence_transformer:
    model_name: sentence-transformers/all-MiniLM-L6-v2
  openai:
    model_name: gpt-5-nano
    api_key: "{{ env.OPENAI_API_KEY }}"

requirements:
  env:
    - S3_ACCESS_KEY_ID
    - S3_ACCESS_SECRET_KEY
    - POSTGRES_USER
    - POSTGRES_PASSWORD
    - POSTGRES_HOST
    - POSTGRES_PORT
    - POSTGRES_DB
    - QDRANT_HOST
    - QDRANT_PORT
    - OPENAI_API_KEY
